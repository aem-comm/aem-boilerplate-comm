/*! Copyright 2024 Adobe
All Rights Reserved. */
import{jsx as v,jsxs as _,Fragment as V}from"@dropins/tools/preact-jsx-runtime.js";import{Price as I,Image as P,CartItem as T,Icon as g,Incrementer as u}from"@dropins/tools/components.js";import{useCallback as A}from"@dropins/tools/preact-hooks.js";import{classes as G}from"@dropins/tools/lib.js";import{O as o}from"./OrderLoaders.js";import*as M from"@dropins/tools/preact-compat.js";const r=k=>M.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...k},M.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),M.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),se=({placeholderImage:k="",loading:J,product:e,itemType:X,taxConfig:Y,translations:h,disabledIncrementer:D,onQuantity:E,showConfigurableOptions:f,routeProductDetails:w})=>{var q,x,O,W,$,z,B,F,K,R,U;const{taxExcluded:L,taxIncluded:Q}=Y,t=A((m,b,S)=>v(I,{amount:m,currency:b,weight:"normal",...S}),[]),Z=A(m=>{var S;const b=(S=m==null?void 0:m.product)==null?void 0:S.thumbnail.url;return v(P,{src:b||k,alt:m==null?void 0:m.productName,loading:"lazy",width:"90",height:"120"})},[k]);if(!e)return v(o,{});let N={};const H=X==="cancelled",i=(x=(q=e==null?void 0:e.product)==null?void 0:q.stockStatus)==null?void 0:x.includes("IN_STOCK"),s=e==null?void 0:e.giftCard,a=(O=e==null?void 0:e.itemPrices)==null?void 0:O.priceIncludingTax,l=(W=e==null?void 0:e.itemPrices)==null?void 0:W.originalPrice,n=($=e==null?void 0:e.itemPrices)==null?void 0:$.price,C=e.totalQuantity>1?{quantity:e.totalQuantity}:{},y=e.discounted&&((z=e.price)==null?void 0:z.value)!==(l==null?void 0:l.value)*(e==null?void 0:e.totalQuantity),j={...(e==null?void 0:e.configurableOptions)||{},...(e==null?void 0:e.bundleOptions)||{},...s!=null&&s.senderName?{[h.sender]:s==null?void 0:s.senderName}:{},...s!=null&&s.senderEmail?{[h.sender]:s==null?void 0:s.senderEmail}:{},...s!=null&&s.senderName?{[h.sender]:s==null?void 0:s.senderName}:{},...s!=null&&s.recipientEmail?{[h.recipient]:s==null?void 0:s.recipientEmail}:{},...s!=null&&s.message?{[h.message]:s==null?void 0:s.message}:{},...e!=null&&e.downloadableLinks?{[`${(B=e==null?void 0:e.downloadableLinks)==null?void 0:B.count} ${h.downloadableCount}`]:(F=e==null?void 0:e.downloadableLinks)==null?void 0:F.result}:{}};if(Q&&L){const m=y?l==null?void 0:l.value:(a==null?void 0:a.value)*(e==null?void 0:e.totalQuantity);N={taxExcluded:!0,taxIncluded:void 0,price:t(l==null?void 0:l.value,l==null?void 0:l.currency),total:_(V,{children:[t(m,l==null?void 0:l.currency,{variant:e.discounted&&(a==null?void 0:a.value)!==m?"strikethrough":"default"}),e.discounted&&(a==null?void 0:a.value)!==m?t(a==null?void 0:a.value,a==null?void 0:a.currency,{sale:!0,weight:"bold"}):null]}),totalExcludingTax:t((n==null?void 0:n.value)*e.totalQuantity,n==null?void 0:n.currency)}}else if(!Q&&L)N={taxExcluded:void 0,taxIncluded:void 0,price:t(l==null?void 0:l.value,l==null?void 0:l.currency),total:_(V,{children:[t((l==null?void 0:l.value)*(e==null?void 0:e.totalQuantity),a==null?void 0:a.currency,{variant:y?"strikethrough":"default"}),y?t((K=e.price)==null?void 0:K.value,(R=e.price)==null?void 0:R.currency,{sale:!0,weight:"bold"}):null]}),totalExcludingTax:t((n==null?void 0:n.value)*(e==null?void 0:e.totalQuantity),n==null?void 0:n.currency)};else if(Q&&!L){const m=y?l.value:a.value*e.totalQuantity;N={taxExcluded:void 0,taxIncluded:!0,price:t(a==null?void 0:a.value,a==null?void 0:a.currency),total:_(V,{children:[t(m,a==null?void 0:a.currency,{variant:y?"strikethrough":"default",weight:"bold"}),y?t(a==null?void 0:a.value,a==null?void 0:a.currency,{sale:!0,weight:"bold"}):null]})}}return v(T,{loading:J,alert:H&&i?_("span",{children:[v(g,{source:r}),h.outOfStock]}):v(V,{}),configurations:(f==null?void 0:f(j))??j,title:w?v("a",{"data-testid":"product-name",className:G(["cart-summary-item__title",["cart-summary-item__title--strikethrough",H]]),href:w(e),children:e==null?void 0:e.productName}):v("div",{"data-testid":"product-name",className:G(["cart-summary-item__title",["cart-summary-item__title--strikethrough",H]]),children:e==null?void 0:e.productName}),sku:v("div",{children:(U=e==null?void 0:e.product)==null?void 0:U.sku}),...C,image:w?v("a",{href:w(e),children:Z(e)}):Z(e),...N,footer:E&&!D?v(u,{value:1,min:1,max:e==null?void 0:e.totalQuantity,onValue:m=>E==null?void 0:E(Number(m)),name:"quantity","data-testid":"returnIncrementer",readonly:!0}):void 0})};export{se as C,r as S};
